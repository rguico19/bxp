/*   
   Trigger Name: Update Room Rate
   Purpose: Computes Room Rate, Rate depends on where the reservation was created from (portal or native)
   Room Rate varies from related package or the default rack rate.
*/
var roomRate = Number("{!room_rate#value}");
var rsvSource = String('{!R284328.source_code#value}');
var attachedPackageId = Number("{!R2432013#id}");
if(rsvSource == 'BXP' && String(rbv_api.isPortal()) == "true"){  roomRate = roomRate; }
else{
	// HAS PACKAGE ATTACHED
    if(attachedPackageId > 0){ roomRate = Number({!R2432013.package_price#value}); }
	// HAS NO PACKAGE ATTACHED SO WE WILL USE ROOM RACK RATE
	else{ roomRate = Number({!R284236.rack_rate#value}); /* PACKAGE PRICE SHOULD REFLECT TO NEW_ROOM_RATE */ }
}
return roomRate;
